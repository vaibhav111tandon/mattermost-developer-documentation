<!DOCTYPE html>





<html>
    <head>
        <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<title> Best Practices</title>
<meta name="viewport" content="width=device-width, initial-scale=1">   
<meta http-equiv="content-language" content="en-us" />



<link rel="canonical" href="../../../extend/plugins/best-practices/">


<link rel="shortcut icon" type="image/png" href="../../../img/favicon-32x32.png" />

<link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,600" rel="stylesheet">


<link rel="stylesheet" href="../../../css/bootstrap.min.css">
<link rel="stylesheet" href="../../../css/tabs.css">
<link rel="stylesheet" href="../../../css/bar.css">
<link rel="stylesheet" href="../../../css/styles.css">
<link rel="stylesheet" href="../../../css/code.css">
<link rel="stylesheet" href="../../../css/note.css">


<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
<script src="../../../js/tabs.js"></script>
<script src="../../../js/main.js"></script>
<script async defer src="https://buttons.github.io/buttons.js"></script>
<script async src="//cdn.bizible.com/scripts/bizible.js"></script>

<script async src="https://www.googletagmanager.com/gtag/js?id=UA-64458817-2"></script>
<script>
    window.dataLayer = window.dataLayer || [];
    function gtag() {dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'UA-64458817-2');
</script>


<script type="text/javascript">
    (function() {
    var didInit = false;
    function initMunchkin() {
    if(didInit === false) {
    didInit = true;
    Munchkin.init('161-FBE-733');
    }
    }
    var s = document.createElement('script');
    s.type = 'text/javascript';
    s.async = true;
    s.src = '//munchkin.marketo.net/munchkin.js';
    s.onreadystatechange = function() {
    if (this.readyState == 'complete' || this.readyState == 'loaded') {
    initMunchkin();
    }
    };
    s.onload = initMunchkin;
    document.getElementsByTagName('head')[0].appendChild(s);
    })();
</script>


<script type="text/javascript" charset="utf-8">
    var _eiq = _eiq || [];
    var _engagio_settings = {
      accountId: "cb6a404b72e9141b70d1f82abc04db92b4e56238"
    };
    (function() {
      var ei = document.createElement('script'); ei.type = 'text/javascript'; ei.async = true;
      ei.src = ('https:' == document.location.protocol ? 'https://' : 'http://') + 'web-analytics.engagio.com/js/ei.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ei, s);
    })();
  </script>

    </head>
<body>
    
<header class="with-notification-bar">

    <a href="../../../"><img src="../../../img/logo.svg" alt="Mattermost Logo" width="212px"></a>
    <div class="header__menu-toggle">
        <i class="fa fa-bars"></i>
    </div>
    <ul class="header__links--right">
        <li><a href="../../../">Home</a></li>
        
            
            
            
                
                    <li><a href="../../../contribute/getting-started">Contribute</a></li>
                
            
        
            
            
            
                
                    <li><a href="../../../integrate/getting-started">Integrate</a></li>
                
            
        
            
            
            
                
                    <li class="active"><a href="../../../extend/getting-started">Extend</a></li>
                
            
        
            
            
            
                
                    <li><a href="../../../blog">Blog</a></li>
                
            
        
            
            
            
                
                    <li><a href="https://docs.mattermost.com/">Admin Docs</a></li>
                
            
        
    </ul>
</header>


<div class='notification-bar sticky-top'>
    <div class="notification-bar__content">
        <a class="notification-bar__close">
            <span aria-hidden="true">Ã—</span>
        </a>
        <a href="https://mattermost.com/careers">
            We&#39;re hiring!
        </a>
    </div>
</div>




    <div id="wrapper">
        <div class="container-fluid">
            <div class="row">
                <div class="col-lg-3 sidebar">
    <div class="sidebar__menu-toggle">
        Best Practices
        <i class="fa fa-bars pull-right"></i>
    </div>
    <div class="row sidebar__links">
        
            
                
                

                
                

                
                    
                

                <span class="item ">
                    <i class="sub-menu__toggle fa fa-plus-square-o" aria-hidden="true" style="display: none"></i>
                    
                        <a href="../../../extend/getting-started/"> Getting Started</a>
                    
                </span>
                <ul class="sub-menu" >
                    
                </ul>
            
                
                

                
                

                
                    
                

                <span class="item ">
                    <i class="sub-menu__toggle fa fa-plus-square-o" aria-hidden="true" style=""></i>
                    
                        <a href="../../../extend/customization/"> Customizing Mattermost</a>
                    
                </span>
                <ul class="sub-menu" >
                    
                        
                        

                        
                        

                        
                            
                        

                        <span class="item ">
                            <i class="sub-menu__toggle fa fa-plus-square-o" aria-hidden="true" style="display: none"></i>
                            
                                <a href="../../../extend/customization/server-build/"> Server Build (Team Edition)</a></span>
                            
                        </span>
                        <ul class="sub-menu" >
                            
                        </ul>
                    
                        
                        

                        
                        

                        
                            
                        

                        <span class="item ">
                            <i class="sub-menu__toggle fa fa-plus-square-o" aria-hidden="true" style="display: none"></i>
                            
                                <a href="../../../extend/customization/server-files/"> Server Files</a></span>
                            
                        </span>
                        <ul class="sub-menu" >
                            
                        </ul>
                    
                        
                        

                        
                        

                        
                            
                        

                        <span class="item ">
                            <i class="sub-menu__toggle fa fa-plus-square-o" aria-hidden="true" style="display: none"></i>
                            
                                <a href="../../../extend/customization/webapp/"> Web App</a></span>
                            
                        </span>
                        <ul class="sub-menu" >
                            
                        </ul>
                    
                </ul>
            
                
                

                
                
                    
                

                
                    
                

                <span class="item ">
                    <i class="sub-menu__toggle fa fa-minus-square-o" aria-hidden="true" style=""></i>
                    
                        <a href="../../../extend/plugins/"> Plugins (Beta)</a>
                    
                </span>
                <ul class="sub-menu" style="display: block">
                    
                        
                        

                        
                        

                        
                            
                        

                        <span class="item ">
                            <i class="sub-menu__toggle fa fa-plus-square-o" aria-hidden="true" style="display: none"></i>
                            
                                <a href="../../../extend/plugins/overview/"> Overview</a></span>
                            
                        </span>
                        <ul class="sub-menu" >
                            
                        </ul>
                    
                        
                        

                        
                        

                        
                            
                        

                        <span class="item ">
                            <i class="sub-menu__toggle fa fa-plus-square-o" aria-hidden="true" style="display: none"></i>
                            
                                <a href="../../../extend/plugins/developer-setup/"> Developer Setup</a></span>
                            
                        </span>
                        <ul class="sub-menu" >
                            
                        </ul>
                    
                        
                        

                        
                        

                        
                            
                        

                        <span class="item ">
                            <i class="sub-menu__toggle fa fa-plus-square-o" aria-hidden="true" style="display: none"></i>
                            
                                <a href="../../../extend/plugins/developer-workflow/"> Developer Workflow</a></span>
                            
                        </span>
                        <ul class="sub-menu" >
                            
                        </ul>
                    
                        
                        

                        
                        

                        
                            
                        

                        <span class="item ">
                            <i class="sub-menu__toggle fa fa-plus-square-o" aria-hidden="true" style=""></i>
                            
                                <a href="../../../extend/plugins/server/"> Server Plugins</a></span>
                            
                        </span>
                        <ul class="sub-menu" >
                            
                                <a class="item " href="../../../extend/plugins/server/hello-world/">Quick Start</a>
                            
                                <a class="item " href="../../../extend/plugins/server/reference/">Server Reference</a>
                            
                                <a class="item " href="../../../extend/plugins/server/ha/">High Availability</a>
                            
                                <a class="item " href="../../../extend/plugins/server/debugging/"></a>
                            
                                <a class="item active" href="../../../extend/plugins/server/best-practices/">Best Practices</a>
                            
                        </ul>
                    
                        
                        

                        
                        

                        
                            
                        

                        <span class="item ">
                            <i class="sub-menu__toggle fa fa-plus-square-o" aria-hidden="true" style=""></i>
                            
                                <a href="../../../extend/plugins/webapp/"> Web App Plugins</a></span>
                            
                        </span>
                        <ul class="sub-menu" >
                            
                                <a class="item " href="../../../extend/plugins/webapp/hello-world/">Quick Start</a>
                            
                                <a class="item " href="../../../extend/plugins/webapp/reference/">Web App Reference</a>
                            
                                <a class="item " href="../../../extend/plugins/webapp/actions/">Redux Actions</a>
                            
                                <a class="item active" href="../../../extend/plugins/webapp/best-practices/">Best Practices</a>
                            
                        </ul>
                    
                        
                        

                        
                        

                        
                            
                        

                        <span class="item ">
                            <i class="sub-menu__toggle fa fa-plus-square-o" aria-hidden="true" style="display: none"></i>
                            
                                <a href="../../../extend/plugins/manifest-reference/"> Manifest Reference</a></span>
                            
                        </span>
                        <ul class="sub-menu" >
                            
                        </ul>
                    
                        
                        

                        
                        

                        
                            
                        

                        <span class="item ">
                            <i class="sub-menu__toggle fa fa-plus-square-o" aria-hidden="true" style="display: none"></i>
                            
                                <a href="../../../extend/plugins/mobile/"> Mobile Plugins</a></span>
                            
                        </span>
                        <ul class="sub-menu" >
                            
                        </ul>
                    
                        
                        

                        
                        

                        
                            
                        

                        <span class="item ">
                            <i class="sub-menu__toggle fa fa-plus-square-o" aria-hidden="true" style="display: none"></i>
                            
                                <a href="../../../extend/plugins/example-plugins/"> Example Plugins</a></span>
                            
                        </span>
                        <ul class="sub-menu" >
                            
                        </ul>
                    
                        
                        

                        
                        

                        
                            
                        

                        <span class="item ">
                            <i class="sub-menu__toggle fa fa-plus-square-o" aria-hidden="true" style="display: none"></i>
                            
                                <a href="../../../extend/plugins/migration/"> Migrating Plugins</a></span>
                            
                        </span>
                        <ul class="sub-menu" >
                            
                        </ul>
                    
                        
                        

                        
                        

                        
                            
                        

                        <span class="item ">
                            <i class="sub-menu__toggle fa fa-plus-square-o" aria-hidden="true" style="display: none"></i>
                            
                                <a href="../../../extend/plugins/community_process/"> Process to Include Plugin on Community</a></span>
                            
                        </span>
                        <ul class="sub-menu" >
                            
                        </ul>
                    
                        
                        

                        
                        

                        
                            
                        

                        <span class="item ">
                            <i class="sub-menu__toggle fa fa-plus-square-o" aria-hidden="true" style="display: none"></i>
                            
                                <a href="../../../extend/plugins/community-plugin-marketplace/"> Community Plugins in the Marketplace</a></span>
                            
                        </span>
                        <ul class="sub-menu" >
                            
                        </ul>
                    
                        
                        

                        
                        
                            
                        

                        
                            
                        

                        <span class="item active">
                            <i class="sub-menu__toggle fa fa-minus-square-o" aria-hidden="true" style="display: none"></i>
                            
                                <a class="active" href="../../../extend/plugins/best-practices/"> Best Practices</a></span>
                            
                        </span>
                        <ul class="sub-menu" style="display: block">
                            
                        </ul>
                    
                        
                        

                        
                        

                        
                            
                        

                        <span class="item ">
                            <i class="sub-menu__toggle fa fa-plus-square-o" aria-hidden="true" style="display: none"></i>
                            
                                <a href="../../../extend/plugins/source-available-license/"> Source Available License</a></span>
                            
                        </span>
                        <ul class="sub-menu" >
                            
                        </ul>
                    
                        
                        

                        
                        

                        
                            
                        

                        <span class="item ">
                            <i class="sub-menu__toggle fa fa-plus-square-o" aria-hidden="true" style="display: none"></i>
                            
                                <a href="../../../extend/plugins/helpers/"> Plugin Helpers</a></span>
                            
                        </span>
                        <ul class="sub-menu" >
                            
                        </ul>
                    
                </ul>
            
                
                

                
                

                
                    
                

                <span class="item ">
                    <i class="sub-menu__toggle fa fa-plus-square-o" aria-hidden="true" style="display: none"></i>
                    
                        <a href="../../../extend/embed/"> Embed</a>
                    
                </span>
                <ul class="sub-menu" >
                    
                </ul>
            
        
    </div>
</div>

                <div class="col-lg-9 doc-content">
                    
<a href="https://github.com/mattermost/mattermost-developer-documentation/edit/master/site/content/extend/plugins/best-practices.md" class="float-right edit-github">
    Edit on GitHub
</a>


                    <h1 class="mt-0 doc-title">
                        Best Practices
                    </h1>
                    <p>See here for <a href="../../../extend/plugins/server/best-practices/">server-specific best practices for plugins</a>. Webapp-specific best practices are incoming.</p>
<h2 id="how-can-a-plugin-enable-its-configuration-through-the-system-console">How can a plugin enable its configuration through the System Console?&nbsp;<a class="hanchor fa fa-link" ariaLabel="Anchor" href="#how-can-a-plugin-enable-its-configuration-through-the-system-console"></i></a> </h2>
<p>Once a plugin is installed, Administrators have access to the plugin&rsquo;s configuration page in the <strong>System Console &gt; Plugins</strong> section. The configurable settings must first be defined in the plugin&rsquo;s manifest <a href="https://developers.mattermost.com/extend/plugins/manifest-reference/#settings_schema">setting schema</a>. The web app supports several basic pre-defined settings type, e.g. <code>bool</code> and <code>dropdown</code>, for which the corresponding UI components are provided in order to complete configuration in the System Console.</p>
<p>These settings are stored within the server configuration under [<code>Plugins</code>] indexed by plugin ids. The plugin&rsquo;s server code can access their current configuration calling the <a href="https://developers.mattermost.com/extend/plugins/server/reference/#API.GetConfig"><code>getConfig</code></a> API call and can also make changes as needed with <a href="https://developers.mattermost.com/extend/plugins/server/reference/#API.SaveConfig"><code>saveConfig</code></a>.</p>
<h2 id="how-can-a-plugin-define-its-own-setting-type">How can a plugin define its own setting type?&nbsp;<a class="hanchor fa fa-link" ariaLabel="Anchor" href="#how-can-a-plugin-define-its-own-setting-type"></i></a> </h2>
<p>A plugin could define its own type of setting with a corresponding custom user interface that will be displayed in the System Console following the process below.</p>
<ol>
<li>Define a <code>type: custom</code> setting in the plugins manifest <code>settings_schema</code></li>
</ol>
<div class="highlight"><pre style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-diff" data-lang="diff">&#34;settings_schema&#34;: {
    &#34;settings&#34;: [{
        &#34;key&#34;: &#34;NormalSetting&#34;,
        &#34;type&#34;: &#34;text&#34;,
<span style="background-color:#cfc">+    }, {
</span><span style="background-color:#cfc">+        &#34;key&#34;: &#34;CustomSetting&#34;,
</span><span style="background-color:#cfc">+        &#34;type&#34;: &#34;custom&#34;
</span><span style="background-color:#cfc"></span>    }]
}
</code></pre></div><ol start="2">
<li>
<p>In the plugin&rsquo;s web app code, define a custom component to manage the plugin&rsquo;s custom setting and register it in the web app with <a href="https://developers.mattermost.com/extend/plugins/webapp/reference/#registerAdminConsoleCustomSetting"><code>registerAdminConsoleCustomSetting</code></a>. This component will be instantiated in the System Console with the following <code>props</code> passed in:</p>
<ul>
<li><code>id</code>: The setting <code>key</code> as defined in the plugin manifest within <code>settings_schema.settings</code>.</li>
<li><code>label</code>: The text for the component label based on the setting&rsquo;s <code>displayName</code> defined in the manifest.</li>
<li><code>helpText</code>: The help text based on the setting&rsquo;s <code>helpText</code> defined in the manifest.</li>
<li><code>value</code>: The setting&rsquo;s current json value in the config at the time the component is loaded.</li>
<li><code>disabled</code>: Boolean indicating if the setting is disabled by a parent component within the System Console.</li>
<li><code>config</code>: The server configuration loaded by the web app.</li>
<li><code>license</code>: The license information for the related Mattermost server.</li>
<li><code>setByEnv</code>: Boolean that indicates if the setting is based on a server environment variable.</li>
<li><code>onChange</code>: Function that receives the setting id and current json value of the setting when it has been changed within the custom component.</li>
<li><code>setSaveNeeded</code>: Function that will prompt the System Console to enable the Save button in the plugin settings screen.</li>
<li><code>registerSaveAction</code>: Registers the given function to be executed when the setting is saved. This is registered when the custom component is mounted.</li>
<li><code>unRegisterSaveAction</code>: On unmount of the custom component, unRegisterSaveAction will remove the registered function executed on save of the custom component.</li>
</ul>
</li>
<li>
<p>On initialization of the custom component, the current value of the custom setting is passed in the <code>props.value</code> in a json format as read from the config. This value can be processed as necessary to display in your custom UI and ready to be modified by the end user. In the example below, it processes the initial <code>props.value</code> and sets it in a local state for the component to use as needed:</p>
</li>
</ol>
<pre><code>constructor(props) {
        super(props);

        this.state = {
            attributes: this.initAttributes(props.value),
        }
    }
</code></pre><ol start="4">
<li>When a user makes a change in the UI, the <code>OnChange</code> handler sends back the current value of the setting as a json. Additionally, <code>setSaveNeeded</code> should be called to enable the <code>Save</code> button in order for the changes to be saved.</li>
</ol>
<pre><code>handleChange = () =&gt; {
    ...

    this.props.onChange(this.props.id,  Array.from(this.state.attributes.values()));
    this.props.setSaveNeeded()
};
</code></pre><ol start="5">
<li>Once the user saves the changes, any handler that was registered with <code>registerSaveAction</code> will be executed to perform any additional custom actions the plugin may require, such as calling an additional endpoint within the plugin.</li>
</ol>
<p>For examples of custom settings see: Demo Plugin <a href="https://github.com/mattermost/mattermost-plugin-demo/blob/master/webapp/src/components/admin_settings/custom_setting.jsx"><code>CustomSetting</code></a> and Custom Attributes Plugin <a href="https://github.com/mattermost/mattermost-plugin-custom-attributes/pull/18">implementation</a>.</p>
<h2 id="how-can-i-review-the-entire-code-base-of-a-plugin">How can I review the entire code base of a plugin?&nbsp;<a class="hanchor fa fa-link" ariaLabel="Anchor" href="#how-can-i-review-the-entire-code-base-of-a-plugin"></i></a> </h2>
<p>Sometimes, you have been working on a personal repository for a new plugin, most probably based on the <a href="https://github.com/mattermost/mattermost-plugin-starter-template/">mattermost-plugin-starter-template</a> repo. As it was a personal project, you may have pushed all of your commits directly to <code>master</code>. And now that it&rsquo;s functional, you need a reviewer to take a look at the whole thing.</p>
<p>For this, it is useful to create a PR with only the commits you added. Follow these steps to do so:</p>
<ol>
<li>First of all, you need to obtain the identifier of the oldest commit that should be reviewed. You can review your history with <code>git log --oneline</code>, where you need to look for the very first commit that you added. Imagine that the output is something like the following:</li>
</ol>
<pre><code>f7d89b8 (HEAD -&gt; master, origin/master) Lint code
fa99500 Fix bug
0b3b5bd Add feature
8f6aef3 My first commit to the plugin
...
... rest of commits from mattermost-plugin-starter-template
...
</code></pre><p>In this case, the identifier that we need to copy is <code>8f6aef3</code>.</p>
<ol start="2">
<li>Create a new branch without the commits that you added. Using the SHA that you copied, create the branch <code>base</code> and push it:</li>
</ol>
<pre><code>git branch base 8f6aef3~1
git push origin base
</code></pre><p>Note that <code>8f6aef3~1</code> means <em>the parent commit of <code>8f6aef3</code></em>, effectively selecting all the commits in the branch except the ones that you added.</p>
<ol start="3">
<li>Create a branch with all the commits, included the ones that you added, and push it. This branch, <code>compare</code>, will be an exact copy of <code>master</code>:</li>
</ol>
<div class="highlight"><pre style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">git branch compare master
git push origin compare
</code></pre></div><ol start="4">
<li>
<p>Now you have two new branches in the repository: <code>base</code> and <code>compare</code>. In Github, create a new PR in your repository, setting the <em>base</em> branch to <code>base</code> and the <em>compare</em> branch to <code>compare</code>.</p>
</li>
<li>
<p>Request a code review on the resulting PR.</p>
</li>
</ol>
<p>For future changes, you can always repeat this process, making sure to identify the first commit you want to be reviewed. You can also consider the more common scenario of creating a feature branch (using something like <code>git checkout -b my.feature.branch</code>) and opening a PR whenever you want to merge the changes into <code>master</code>. It&rsquo;s up to you!</p>


                </div>
            </div>
        </div>
    </div>
    <footer class="text-center">
    <div class="container-fluid">
        <div class="footer__copyright">Â© Mattermost, Inc. All Rights Reserved.</div>
        <div class="footer__icons">
            <a href="https://www.facebook.com/Mattermost-2300985916642531/"><i class="fa fa-facebook"></i></a>
            <a href="https://twitter.com/mattermost"><i class="fa fa-twitter"></i></a>
            <a href="https://www.youtube.com/channel/UCNR05H72hi692y01bWaFXNA"><i class="fa fa-youtube"></i></a>
        </div>
    </div>
</footer>

</body>
</html>
